
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Exam: GA4, GTM, Looker Studio & Cookie Consent</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .level-card, .question-option {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .level-card:hover, .question-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .question-option { /* Add border for layout consistency */
            border: 2px solid transparent;
        }
        .option-selected { /* New class for selected answers */
            background-color: #eef2ff; /* Subtle light indigo */
            border-color: #4f46e5;   /* Clear indigo border */
            font-weight: 500;
        }
        .question-answered {
            border-color: #108289; /* Green from the palette */
            background-color: #f0fdf4; /* A very light green for background */
        }
        .submit-btn:disabled {
            background-color: #818181;
            cursor: not-allowed;
            transform: none;
        }
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 50;
        }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-gray-100 font-sans text-gray-800">

    <div class="container mx-auto p-4 sm:p-8">

        <!-- Level Selection -->
        <div id="level-selection-container" class="max-w-4xl mx-auto text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-[#132b3d] mb-4">Choose Your Exam Level</h1>
            <p class="text-lg text-gray-600 mb-8">Select a difficulty level to begin the exam.</p>
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Basic Level -->
                <div onclick="startQuiz('basic')" class="level-card bg-white p-8 rounded-lg shadow-xl border-t-4 border-green-500">
                    <h2 class="text-2xl font-bold text-[#132b3d] mb-3">Level 1: Basic</h2>
                    <p class="text-gray-600">Fundamentals of GA4, GTM, Server-side Tagging, and Cookie Consent.</p>
                </div>
                <!-- Intermediate Level -->
                <div onclick="startQuiz('intermediate')" class="level-card bg-white p-8 rounded-lg shadow-xl border-t-4 border-yellow-500">
                    <h2 class="text-2xl font-bold text-[#132b3d] mb-3">Level 2: Intermediate</h2>
                    <p class="text-gray-600">Custom events, data layer debugging, and consent integration.</p>
                </div>
                <!-- Advanced Level -->
                <div onclick="startQuiz('advanced')" class="level-card bg-white p-8 rounded-lg shadow-xl border-t-4 border-red-500">
                    <h2 class="text-2xl font-bold text-[#132b3d] mb-3">Level 3: Advanced</h2>
                    <p class="text-gray-600">Advanced debugging, deduplication, and attribution modeling.</p>
                </div>
            </div>
        </div>

        <div id="quiz-container" class="hidden bg-white p-6 sm:p-8 rounded-lg shadow-xl max-w-4xl mx-auto">
            <div class="sticky-header bg-white pb-4 rounded-lg flex flex-col sm:flex-row justify-between items-center mb-4">
                <h1 id="quiz-title" class="text-xl sm:text-2xl font-bold text-[#132b3d] mb-2 sm:mb-0">GA4, GTM, Looker & Consent Exam</h1>
                <div class="flex items-center space-x-4">
                    <p class="text-md font-medium text-[#132b3d]">Questions Answered: <span id="answered-count">0</span> / <span id="total-questions-header">50</span></p>
                    <button onclick="restartQuiz()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Restart Exam</button>
                    <button onclick="showLevelSelection()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Change Level</button>
                </div>
            </div>
            
            <!-- Quiz Questions Section -->
            <div id="questions-list" class="space-y-8"></div>

            <!-- Submission Button -->
            <div class="mt-10 text-center">
                <button id="submit-btn" class="submit-btn bg-[#f37e21] text-white font-bold py-4 px-12 rounded-full hover:bg-orange-600 transition-all transform hover:scale-105" disabled>
                    Submit Exam
                </button>
            </div>
        </div>

        <!-- Scorecard -->
        <div id="scorecard-container" class="hidden bg-white p-6 sm:p-8 rounded-lg shadow-xl mt-8 max-w-4xl mx-auto">
            <h2 class="text-3xl sm:text-4xl font-bold text-center text-[#132b3d] mb-4">Your Results</h2>
            <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
                <div class="w-48 h-48">
                    <canvas id="score-chart"></canvas>
                </div>
                <div class="text-center md:text-left">
                    <p class="text-lg text-[#818181]">You answered</p>
                    <p class="text-6xl font-extrabold text-[#132b3d]"><span id="score"></span>/<span id="total-questions-score"></span></p>
                    <p class="text-lg text-[#818181]">questions correctly.</p>
                </div>
            </div>
            <div id="scorecard-details" class="space-y-6"></div>
            <div class="mt-8 text-center">
                <button onclick="showLevelSelection()" class="bg-[#f37e21] text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition-all transform hover:scale-105">
                    Back to Level Select
                </button>
            </div>
        </div>
    </div>

    <script>
        const allQuizData = {
            basic: [
                {id:1,question:"In GA4, what is the default measurement model?",options:["Session-based","Pageview-based","Event-based","User-based"],answer:"Event-based",explanation:"GA4 uses an event-based data model, unlike UA which was session/pageview-based. Every interaction (page view, click, scroll, purchase) is tracked as an event."},
                {id:2,question:"Which of the following is NOT a default event automatically collected in GA4?",options:["Page_view","Scroll","Outbound_click","Custom_conversion"],answer:"Custom_conversion",explanation:"GA4 automatically collects page_view, scroll, outbound_click, etc., but custom conversions must be set up manually by the user."},
                {id:3,question:"In GTM, what is a “Trigger”?",options:["A variable that stores values","A condition that fires a tag","A tag type for GA4","A report in GA4"],answer:"A condition that fires a tag",explanation:"Triggers in GTM decide when a tag should fire. For example, a GA4 event tag may fire only when the trigger condition (like button click) is met."},
                {id:4,question:"Which GTM component holds dynamic values like Page URL or Click Text?",options:["Tag","Trigger","Variable","Event"],answer:"Variable",explanation:"Variables in GTM store dynamic values (like Page URL, Click ID, or custom data layer values) that can be used in triggers or tags."},
                {id:5,question:"When setting up GA4 via GTM, which tag type is most commonly used for tracking events?",options:["Universal Analytics Event","GA4 Configuration","GA4 Event","GA4 Page Path"],answer:"GA4 Event",explanation:"The GA4 Event tag is used for tracking custom events. The GA4 Configuration tag initializes GA4, but the event tag is used for actual user interactions."},
                {id:6,question:"Which of the following is true about GA4 server-side tagging at a basic level?",options:["It removes the need for GTM","It allows sending data via your own server endpoint","It works without a tracking ID","It is default in every GA4 property"],answer:"It allows sending data via your own server endpoint",explanation:"Server-side tagging routes tracking requests through your own server endpoint, giving you more control over data privacy and accuracy."},
                {id:7,question:"Which of the following is a benefit of using basic cookie consent banners?",options:["Improves SEO ranking","Ensures compliance with privacy regulations like GDPR","Increases ad impressions","Speeds up page load"],answer:"Ensures compliance with privacy regulations like GDPR",explanation:"Cookie consent banners are required in many regions (EU/California) to obtain user permission before setting tracking cookies."},
                {id:8,question:"In GA4, which parameter automatically comes with the page_view event?",options:["page_url","page_referrer","page_location","page_category"],answer:"page_location",explanation:"The page_view event automatically includes page_location (full URL), page_referrer, and other metadata."},
                {id:9,question:"What is the purpose of the Preview mode in GTM?",options:["To edit GA4 reports","To test tags and triggers before publishing","To configure server-side tagging","To manage cookie banners"],answer:"To test tags and triggers before publishing",explanation:"GTM Preview/Debug mode lets you test which tags fire, what triggers are working, and what data is sent—before going live."},
                {id:10,question:"Which of the following GA4 features replaces Goals from Universal Analytics?",options:["Key Events","Audience","Reports Snapshot","Segments"],answer:"Key Events",explanation:"In GA4, Key Events (formerly Conversions) are used instead of Goals from UA. They mark important business actions like purchases or form submissions."},
                {id:11,question:"Which GA4 tag is required first in GTM before sending any event?",options:["GA4 Event Tag","GA4 Pageview Tag","GA4 Configuration Tag","GA4 Ecommerce Tag"],answer:"GA4 Configuration Tag",explanation:"The Configuration tag initializes GA4 with your Measurement ID. Without it, event tags cannot properly send data to GA4."},
                {id:12,question:"What does the GA4 Measurement ID look like?",options:["UA-XXXXXX-X","G-XXXXXXX","GTM-XXXXXX","GA4-XXXXXX"],answer:"G-XXXXXXX",explanation:"GA4 Measurement IDs start with “G-”, while UA IDs start with “UA-”."},
                {id:13,question:"Which of these is an automatically collected event in GA4?",options:["video_progress","session_start","newsletter_signup","form_submit"],answer:"session_start",explanation:"GA4 automatically tracks session_start, page_view, scroll, and more. Events like newsletter_signup or form_submit need custom setup."},
                {id:14,question:"In GTM, the “All Pages” trigger is usually used with:",options:["Custom HTML tags","GA4 Configuration tag","Consent banners","Variables"],answer:"GA4 Configuration tag",explanation:"The GA4 Configuration tag should fire on All Pages so that GA4 is initialized across the site."},
                {id:15,question:"What is the default session timeout in GA4?",options:["15 minutes","30 minutes","1 hour","24 hours"],answer:"30 minutes",explanation:"By default, GA4 sessions timeout after 30 minutes of inactivity, though this can be customized."},
                {id:16,question:"What is the role of the GTM “Data Layer”?",options:["Stores user consent preferences","Stores and passes structured data to GTM","Replaces GA4 tags","Debugs GA4 reports"],answer:"Stores and passes structured data to GTM",explanation:"The Data Layer is a JavaScript object that holds structured data (e.g., ecommerce details, user info) that GTM can use in tags."},
                {id:17,question:"Which of the following is an Enhanced Measurement event in GA4?",options:["Click_download","File_download","Purchase","Add_to_cart"],answer:"File_download",explanation:"Enhanced Measurement automatically tracks interactions like file_download, outbound_click, and scroll. Ecommerce events like purchase or add_to_cart require manual setup."},
                {id:18,question:"Which GTM tag type is used to set up GA4 tracking?",options:["Custom JavaScript","GA4 Event Tag","Custom HTML","Google Ads Remarketing"],answer:"GA4 Event Tag",explanation:"GA4 Event tags in GTM allow sending custom or recommended GA4 events."},
                {id:19,question:"Which GA4 metric measures the number of users who engaged with the site for at least 10 seconds or triggered a conversion event?",options:["Active Users","Engaged Sessions","Conversion Rate","Bounce Rate"],answer:"Engaged Sessions",explanation:"GA4 uses Engaged Sessions instead of Bounce Rate. A session counts as engaged if it lasts 10+ seconds, includes 2+ page views, or includes a conversion."},
                {id:20,question:"Which type of cookie is typically set by GA4 client-side tracking?",options:["_ga","PHPSESSID","_utmz","JSESSIONID"],answer:"_ga",explanation:"The _ga cookie is used by GA4 to identify unique users."},
                {id:21,question:"What does GTM’s “Preview” mode show in the debug panel?",options:["Only GA4 reports","Which tags fired, blocked, and the triggers","Cookie policies","GA4 user paths"],answer:"Which tags fired, blocked, and the triggers",explanation:"GTM Preview mode is used to debug: it shows which tags fired, why, and what data was passed."},
                {id:22,question:"In GA4, which scope applies to parameters?",options:["Session","Event","User","Page"],answer:"Event",explanation:"Parameters in GA4 are tied to events, unlike UA which had session and user scopes."},
                {id:23,question:"Which type of GTM variable retrieves values from the Data Layer?",options:["Auto-event Variable","Lookup Table Variable","Data Layer Variable","Custom JavaScript Variable"],answer:"Data Layer Variable",explanation:"Data Layer Variables pull values from the GTM Data Layer object."},
                {id:24,question:"In GA4, what is the limit of parameters per event (including default + custom)?",options:["10","25","50","Unlimited"],answer:"50",explanation:"Each event can have up to 50 parameters in GA4."},
                {id:25,question:"Which GA4 feature helps in tracking user journeys across devices?",options:["Session Unification","User-ID tracking","IP override","Cross-property filters"],answer:"User-ID tracking",explanation:"User-ID tracking allows GA4 to stitch user journeys across devices if the same login is used."},
                {id:26,question:"What is a common use of Consent Mode in GTM?",options:["Speed optimization","Adjusting data collection based on user consent","Debugging tags","Removing cookies"],answer:"Adjusting data collection based on user consent",explanation:"Consent Mode modifies tag behavior (e.g., ads, analytics) based on user consent decisions."},
                {id:27,question:"Which of these is an example of a GA4 recommended event?",options:["sign_up","login_attempt","new_session","outbound_link"],answer:"sign_up",explanation:"Google recommends using predefined event names like sign_up, purchase, login for consistency in reporting."},
                {id:28,question:"Where in GTM can you find built-in variables like Page URL, Click ID, and Referrer?",options:["Variables > Built-in Variables","Triggers > Conditions","Tags > Properties","Data Layer Settings"],answer:"Variables > Built-in Variables",explanation:"Built-in variables are pre-configured and can be enabled under GTM’s Variables section."},
                {id:29,question:"What is the maximum number of properties allowed per GA4 account?",options:["25","50","100","Unlimited"],answer:"100",explanation:"A GA4 account can have up to 100 properties."},
                {id:30,question:"Which GA4 event is triggered automatically when a user clicks a link to another website?",options:["click_out","external_link","outbound_click","exit_click"],answer:"outbound_click",explanation:"Enhanced Measurement automatically tracks outbound_click events."},
                {id:31,question:"What is the maximum length for a GA4 event parameter name?",options:["24 characters","40 characters","50 characters","100 characters"],answer:"40 characters",explanation:"GA4 parameter names can be up to 40 characters long."},
                {id:32,question:"In GTM, which trigger type is best to capture a button click?",options:["Page View","DOM Ready","Click – All Elements","Timer"],answer:"Click – All Elements",explanation:"The “Click – All Elements” trigger can capture clicks on specific buttons or links."},
                {id:33,question:"Which GA4 metric counts users who visited a site at least once in the last 30 days?",options:["Daily Active Users","Weekly Active Users","Monthly Active Users","Lifetime Users"],answer:"Monthly Active Users",explanation:"GA4 provides DAU, WAU, MAU metrics to measure engagement."},
                {id:34,question:"What is the correct order of GTM execution?",options:["Variables → Triggers → Tags","Triggers → Tags → Variables","Tags → Variables → Triggers","Variables → Tags → Triggers"],answer:"Variables → Triggers → Tags",explanation:"GTM first resolves variables, then evaluates triggers, then fires tags."},
                {id:35,question:"Which GA4 tool allows you to debug live event collection?",options:["Realtime Report","DebugView","Exploration","Audience Builder"],answer:"DebugView",explanation:"DebugView shows events in real-time from devices with debug mode enabled."},
                {id:36,question:"Which of the following is NOT a GTM trigger type?",options:["Page View","Scroll Depth","Form Submission","Session Timeout"],answer:"Session Timeout",explanation:"GTM does not have a “Session Timeout” trigger."},
                {id:37,question:"What is the GA4 BigQuery free daily export limit?",options:["1 GB","10 GB","50 GB","1 TB"],answer:"10 GB",explanation:"Free GA4 BigQuery export allows 10 GB of queries per day."},
                {id:38,question:"What happens if you do not publish a GTM container after making changes?",options:["Tags auto-publish after 24 hrs","Tags remain inactive","GA4 breaks","Consent mode resets"],answer:"Tags remain inactive",explanation:"GTM changes only go live after publishing a container version."},
                {id:39,question:"Which GA4 event is triggered when a user starts a new session?",options:["session_begin","session_new","session_start","session_initiate"],answer:"session_start",explanation:"GA4 automatically logs session_start at the beginning of a new session."},
                {id:40,question:"What is the GA4 free data retention period by default?",options:["2 months","14 months","26 months","Unlimited"],answer:"2 months",explanation:"GA4 keeps event-level data for 2 months by default, extendable to 14 months."},
                {id:41,question:"What is one benefit of using Server-Side GTM over Client-Side GTM?",options:["Tags fire faster","Data is more accurate & privacy-compliant","It eliminates GA4 configuration","It blocks all cookies"],answer:"Data is more accurate & privacy-compliant",explanation:"Server-side GTM lets you process data securely before sending it to GA4/ads platforms."},
                {id:42,question:"Which GA4 feature allows exporting raw data to BigQuery?",options:["Free for all GA4 properties","Paid only","Only for GA4 360","Only with server-side tagging"],answer:"Free for all GA4 properties",explanation:"Unlike UA, GA4 offers free BigQuery export for all users."},
                {id:43,question:"What type of consent is needed for Analytics cookies in GDPR regions?",options:["No consent required","Explicit user consent","Implicit browser consent","Tag Manager auto-consent"],answer:"Explicit user consent",explanation:"GDPR requires explicit consent for analytics tracking cookies."},
                {id:44,question:"Which of these is a built-in consent state variable in GTM?",options:["consent_analytics","ad_storage","page_consent","user_consent"],answer:"ad_storage",explanation:"Built-in consent variables like ad_storage and analytics_storage control tag behavior."},
                {id:45,question:"What is the main identifier used by GA4 for users (without User-ID)?",options:["User-Agent","Client ID","Session ID","Device ID"],answer:"Client ID",explanation:"GA4 uses Client ID stored in cookies to recognize users."},
                {id:46,question:"What does the GTM “Version History” feature allow?",options:["Editing GA4 reports","Restoring a previous container setup","Exporting GA4 events","Debugging cookies"],answer:"Restoring a previous container setup",explanation:"Version History lets you roll back GTM to a stable version."},
                {id:47,question:"Which GA4 parameter stores the referral source?",options:["session_referrer","traffic_source","page_referrer","utm_source"],answer:"page_referrer",explanation:"GA4 captures page_referrer automatically with events."},
                {id:48,question:"Which GTM feature ensures tags do not fire until user consent is given?",options:["Consent Initialization Trigger","DOM Ready Trigger","Tag Sequencing","Data Layer Push"],answer:"Consent Initialization Trigger",explanation:"Consent Initialization triggers run before all other triggers, enforcing consent requirements."},
                {id:49,question:"Which GA4 property type is used for both websites and apps?",options:["App + Web Property","Hybrid Property","GA4 Property","Firebase Property"],answer:"GA4 Property",explanation:"GA4 properties track both websites and apps under one property."},
                {id:50,question:"What is the benefit of using GA4 DebugView with GTM Preview?",options:["Shows live reports","Confirms events are firing correctly and reaching GA4","Increases site speed","Blocks consent banners"],answer:"Confirms events are firing correctly and reaching GA4",explanation:"DebugView + GTM Preview lets you validate that events fire and reach GA4 in real time."}
            ],
            intermediate: [
                {id:51,question:"Which GA4 report helps identify which campaigns or sources bring engaged sessions?",options:["Demographics","Engagement → Events","Acquisition → Traffic Acquisition","Monetization"],answer:"Acquisition → Traffic Acquisition",explanation:"Traffic Acquisition report shows sessions/users by source, medium, campaign, and engagement."},
                {id:52,question:"What is the recommended way to capture user login status in GA4?",options:["Use GA4 default event","Use a Custom Dimension mapped to a parameter","Add as a User Property only","Track as a Page View"],answer:"Use a Custom Dimension mapped to a parameter",explanation:"Login status must be passed as a parameter → registered as a Custom Dimension for reporting."},
                {id:53,question:"In GTM, which trigger is best for tracking form submissions?",options:["Page View Trigger","Click Trigger","Form Submission Trigger","DOM Ready Trigger"],answer:"Form Submission Trigger",explanation:"GTM has a built-in Form Submission trigger that listens to form events."},
                {id:54,question:"Which GA4 parameter measures the time between first and last user interaction in a session?",options:["engagement_time_msec","session_duration","elapsed_time","user_lifetime"],answer:"session_duration",explanation:"GA4 uses session_duration to calculate time spent per session."},
                {id:55,question:"In server-side tagging, what is a key benefit of using a custom domain for the tagging server?",options:["Reduces costs","Improves tracking accuracy by bypassing ad-blockers","Allows offline tracking","Eliminates cookies completely"],answer:"Improves tracking accuracy by bypassing ad-blockers",explanation:"Using a custom domain for your server endpoint makes tracking harder to block by filters."},
                {id:56,question:"Which GTM feature ensures that a tag fires only once per page load?",options:["Blocking Triggers","Once-per-page firing option","Tag Sequencing","Custom JavaScript Variable"],answer:"Once-per-page firing option",explanation:"In tag settings, you can configure a tag to fire only once per page."},
                {id:57,question:"What is the default session timeout in GA4?",options:["15 minutes","30 minutes","60 minutes","24 hours"],answer:"30 minutes",explanation:"By default, GA4 sessions timeout after 30 minutes of inactivity."},
                {id:58,question:"Which consent type in GTM controls Google Ads remarketing cookies?",options:["analytics_storage","ad_storage","personalization_storage","marketing_storage"],answer:"ad_storage",explanation:"ad_storage consent controls remarketing and advertising cookies."},
                {id:59,question:"If a GA4 event does not appear in DebugView, but the GTM Preview shows it firing, what is the likely issue?",options:["Tag Sequencing error","Wrong Measurement ID in GA4 Configuration","Missing trigger in GTM","Consent not implemented"],answer:"Wrong Measurement ID in GA4 Configuration",explanation:"If GTM shows tag firing but GA4 does not receive the event, it’s often a misconfigured Measurement ID."},
                {id:60,question:"Which of these is NOT a recommended way to implement cookie consent in GTM?",options:["Blocking triggers","Consent Initialization","Tag Sequencing","Server Logs"],answer:"Server Logs",explanation:"Cookie consent should be handled at the tag/trigger level, not via server logs."},
                {id:61,question:"What is the maximum number of GA4 custom metrics per property?",options:["25","50","100","Unlimited"],answer:"50",explanation:"GA4 allows up to 50 custom metrics per property."},
                {id:62,question:"Which GA4 scope is used when you register a User Property?",options:["Event scope","Session scope","User scope","Hit scope"],answer:"User scope",explanation:"User Properties apply at the user level, persisting across sessions."},
                {id:63,question:"What is the role of the “Transport URL” in server-side tagging?",options:["Encrypts GA4 data","Defines the custom endpoint for event collection","Configures cookie consent","Stores user IDs"],answer:"Defines the custom endpoint for event collection",explanation:"The Transport URL points GA4/GTM requests to your server-side endpoint."},
                {id:64,question:"Which GA4 event is recommended for tracking when a user begins checkout?",options:["purchase","add_to_cart","begin_checkout","select_item"],answer:"begin_checkout",explanation:"begin_checkout is the recommended GA4 event for checkout initiation."},
                {id:65,question:"What is the key advantage of using GTM variables inside triggers?",options:["Prevents tag duplication","Makes triggers dynamic and flexible","Blocks consent checks","Simplifies GA4 setup"],answer:"Makes triggers dynamic and flexible",explanation:"Variables allow triggers to adapt based on dynamic values like URLs or click text."},
                {id:66,question:"Which GA4 dimension measures if a user is new or returning?",options:["engagement_type","session_source","new_vs_returning","user_pseudo_id"],answer:"new_vs_returning",explanation:"GA4 has a built-in New/Returning user dimension."},
                {id:67,question:"Which GTM tag type is used to deploy consent banners from third-party tools?",options:["GA4 Event tag","Custom HTML tag","Constant Variable","DOM Ready tag"],answer:"Custom HTML tag",explanation:"Most consent banner scripts are added via Custom HTML tags in GTM."},
                {id:68,question:"In GA4, what is the default lookback window for attribution reporting?",options:["7 days","30 days","90 days","120 days"],answer:"30 days",explanation:"GA4 attribution reporting uses a 30-day lookback window by default (configurable)."},
                {id:69,question:"Which GA4 metric measures the percentage of sessions that were not engaged?",options:["Bounce Rate","Exit Rate","Churn Rate","Drop-off"],answer:"Bounce Rate",explanation:"In GA4, Bounce Rate is the percentage of sessions that were not engaged."},
                {id:70,question:"Which GTM trigger is best for firing a tag on specific URLs only?",options:["All Pages","Page View with URL Condition","DOM Ready","Custom Event"],answer:"Page View with URL Condition",explanation:"You can restrict Page View triggers with conditions on URL or path."},
                {id:71,question:"Which GA4 event is automatically collected when a user clicks a link that leads outside the domain?",options:["file_download","outbound_click","external_link","exit_page"],answer:"outbound_click",explanation:"GA4 auto-collects outbound_click events."},
                {id:72,question:"What is the best way to debug server-side tagging requests?",options:["GA4 Reports","Server Container Debug Mode","Data Studio","Consent Logs"],answer:"Server Container Debug Mode",explanation:"GTM server containers include a debug view for validating requests."},
                {id:73,question:"In GA4, which metric is considered a session quality metric?",options:["Engagement Rate","Bounce Rate","Average Order Value","User Lifetime Value"],answer:"Engagement Rate",explanation:"GA4 uses Engagement Rate instead of bounce rate as a positive quality metric."},
                {id:74,question:"What does the GA4 parameter items contain in ecommerce events?",options:["Total revenue","List of products with attributes","Transaction ID","User ID"],answer:"List of products with attributes",explanation:"items is an array containing product details (ID, name, price, quantity, etc.)."},
                {id:75,question:"Which GTM feature ensures a tag fires after consent is granted?",options:["Tag Sequencing","Consent Checks","Trigger Group","Blocking Trigger"],answer:"Consent Checks",explanation:"GTM’s Consent Checks validate user consent before firing a tag."},
                {id:76,question:"Which GA4 feature helps create groups of users for remarketing?",options:["Segments","Audiences","Explorations","Funnels"],answer:"Audiences",explanation:"Audiences in GA4 are used for remarketing and targeting in Google Ads."},
                {id:77,question:"Which server-side tagging method helps minimize duplicate purchases?",options:["Deduplication logic in server container","Cookie consent enforcement","Data Layer push","GTM Tag Sequencing"],answer:"Deduplication logic in server container",explanation:"Server-side containers can apply deduplication rules for events like purchases."},
                {id:78,question:"Which GA4 consent mode allows only pseudonymous data collection without cookies?",options:["analytics_storage = \"granted\"","analytics_storage = \"denied\"","ad_storage = \"granted\"","personalization_storage = \"denied\""],answer:"analytics_storage = \"denied\"",explanation:"With analytics_storage=denied, GA4 collects only pseudonymous data (no cookies)."},
                {id:79,question:"In GTM, which variable type would you use to extract the text of a clicked button?",options:["Data Layer Variable","DOM Element Variable","Click Text Variable","Constant Variable"],answer:"Click Text Variable",explanation:"GTM has a Click Text variable to capture button/link text."},
                {id:80,question:"What is the key benefit of using server-side tagging for GA4?",options:["Eliminates need for consent banners","Provides better control over data, privacy, and attribution accuracy","Reduces GTM container size","Speeds up GA4 reporting"],answer:"Provides better control over data, privacy, and attribution accuracy",explanation:"Server-side tagging ensures data quality, privacy compliance, and better attribution handling."}
            ],
            advanced: [
                {id:101,question:"A business reports duplicate purchase events in GA4. They are using both GA4 eCommerce events from the website and GA4 purchase events forwarded via server-side tagging. What’s the best solution?",options:["Disable GA4 client in server container","Implement event deduplication with transaction_id","Block client-side events completely","Use only session_id"],answer:"Implement event deduplication with transaction_id",explanation:"GA4 uses the transaction_id parameter for deduplication. Both client and server events should pass the same transaction ID so duplicates are ignored."},
                {id:102,question:"You need to measure scroll depth tracking only after users give cookie consent. How should this be implemented?",options:["Trigger scroll event unconditionally","Use Consent Mode with analytics_storage=’granted’","Use server-side tagging only","Manually filter scroll events in GA4"],answer:"Use Consent Mode with analytics_storage=’granted’",explanation:"By binding scroll event tags to Consent Mode, GA4 only stores data when consent is granted."},
                {id:103,question:"If a GA4 DebugView shows delayed event appearances, what is the likely cause?",options:["Wrong Measurement ID","Debug Mode not enabled","Using server-side tagging which introduces latency","GA4 property misconfigured"],answer:"Using server-side tagging which introduces latency",explanation:"Server-side tagging introduces a slight delay since events route through the server before GA4 receives them."},
                {id:104,question:"An eCommerce site wants to track coupon usage in GA4. Which parameter should be used?",options:["coupon_applied","promotion_id","coupon","discount_code"],answer:"coupon",explanation:"GA4 has a standard eCommerce parameter coupon for tracking promo code usage."},
                {id:105,question:"A GTM tag fires multiple times for the same event. Which debugging step should you take first?",options:["Add a blocking trigger","Check trigger conditions in Preview mode","Clear GTM cache","Change Measurement ID"],answer:"Check trigger conditions in Preview mode",explanation:"Duplicate firing usually occurs due to overly broad trigger conditions, best diagnosed via GTM preview/debug."},
                {id:106,question:"If you want to enrich GA4 events with first-party CRM data via server-side tagging, where should you map this data?",options:["GTM client","Event Data transformation in server container","Consent Initialization tag","GA4 event settings"],answer:"Event Data transformation in server container",explanation:"Server containers allow you to transform/enrich event payloads before forwarding to GA4."},
                {id:107,question:"Which consent mode setting ensures that Google Ads remarketing cookies are only set after user agreement?",options:["analytics_storage","ad_storage","personalization_storage","functional_storage"],answer:"ad_storage",explanation:"ad_storage consent flag controls whether Google Ads remarketing cookies can be set."},
                {id:108,question:"Which GA4 report is best to validate whether consent mode is reducing data volume?",options:["Engagement → Events","Advertising → Conversion Paths","Admin → Consent Debugger","Tech → Consent Overview"],answer:"Tech → Consent Overview",explanation:"GA4 has a Consent Overview report under Tech, showing how consent impacts data."},
                {id:109,question:"An eCommerce site wants to analyze refunds in GA4. Which event should they implement?",options:["refund","cancel_purchase","order_returned","transaction_refund"],answer:"refund",explanation:"GA4 has a standard event refund for returned/canceled purchases."},
                {id:110,question:"You see events firing in GTM Preview but not reaching GA4. The GA4 tag uses a server-side endpoint. What’s the likely issue?",options:["Wrong trigger","Server container not resolving custom domain","GA4 property disabled","Debug Mode not activated"],answer:"Server container not resolving custom domain",explanation:"If GTM fires but GA4 doesn’t log, the Transport URL / server domain may not be properly configured."},
                {id:111,question:"How does GA4’s data-driven attribution differ from last-click?",options:["Gives equal credit to all channels","Prioritizes first click","Distributes credit based on conversion influence across touchpoints","Focuses only on paid channels"],answer:"Distributes credit based on conversion influence across touchpoints",explanation:"Data-driven attribution (DDA) uses machine learning to credit channels proportionally based on their actual contribution."},
                {id:112,question:"In GTM server-side tagging, which client is responsible for processing GA4 hits?",options:["Universal Analytics Client","GA4 Client","HTTP API Client","Consent Client"],answer:"GA4 Client",explanation:"The GA4 Client parses incoming GA4 Measurement Protocol hits in the server container."},
                {id:113,question:"You’re asked to block tracking until a user accepts cookies. Which GTM feature should you use?",options:["Blocking triggers","Consent Initialization tag type","Trigger group","Tag sequencing"],answer:"Consent Initialization tag type",explanation:"Consent Initialization tags run early to control how other tags behave depending on consent."},
                {id:114,question:"An analyst notices missing purchases in GA4 when using server-side tagging. What’s the first troubleshooting step?",options:["Verify ecommerce schema in GTM","Check if GA4 Client in server container is active","Reinstall GTM","Shorten session timeout"],answer:"Check if GA4 Client in server container is active",explanation:"If purchases aren’t being logged, the GA4 Client in the server container may be misconfigured or missing."},
                {id:115,question:"Which GA4 dimension allows identifying cross-platform users if User-ID is implemented?",options:["user_pseudo_id","user_id","device_category","client_id"],answer:"user_id",explanation:"GA4’s User-ID feature links users across devices/platforms."},
                {id:116,question:"What happens when analytics_storage is denied but ad_storage is granted?",options:["Analytics cookies not stored, Ads cookies allowed","Ads cookies blocked, Analytics works","Both disabled","Consent ignored"],answer:"Analytics cookies not stored, Ads cookies allowed",explanation:"Consent Mode lets you granularly control storage for analytics vs ads separately."},
                {id:117,question:"A site uses SPA (Single Page Application). Why are History Change Triggers recommended in GTM?",options:["They prevent duplicate GA4 sessions","They track navigation without full page reloads","They bypass cookie consent","They automatically enrich GA4 data"],answer:"They track navigation without full page reloads",explanation:"SPAs don’t reload pages, so GTM History Change triggers detect virtual navigation events."},
                {id:118,question:"You observe inflated direct traffic in GA4 after enabling server-side tagging. What’s the likely issue?",options:["Incorrect consent mode setup","Missing referrer forwarding in server container","Wrong attribution model","Over-sampling"],answer:"Missing referrer forwarding in server container",explanation:"If referrer headers aren’t forwarded in server-side requests, GA4 mislabels traffic as direct."},
                {id:119,question:"What is the maximum number of GA4 audiences per property?",options:["50","100","200","Unlimited"],answer:"200",explanation:"GA4 allows 200 audiences per property."},
                {id:120,question:"A client complains that GA4 reports fewer users than expected after enabling Consent Mode. Why?",options:["GA4 sampling","Users declining consent reduces cookie-based tracking","Wrong Measurement ID","Debug Mode not used"],answer:"Users declining consent reduces cookie-based tracking",explanation:"Consent Mode limits tracking based on user choices → fewer users may be counted."},
                {id:121,question:"Which GTM feature ensures one tag runs only after another tag successfully fires?",options:["Trigger Groups","Blocking Trigger","Tag Sequencing","Lookup Table Variable"],answer:"Tag Sequencing",explanation:"Tag sequencing ensures execution order (e.g., GA4 config fires before event tags)."},
                {id:122,question:"In GA4, where do you configure a custom dimension for an event parameter?",options:["Tag Manager variable list","GA4 Admin → Custom Definitions","GA4 Reports → Explorations","Consent Initialization"],answer:"GA4 Admin → Custom Definitions",explanation:"GA4 requires you to register event parameters as custom dimensions before they appear in reports."},
                {id:123,question:"If a GA4 event parameter is not appearing in reports after setup, what is the most likely reason?",options:["Wrong property ID","Parameter not registered as a custom definition","Consent denied","GA4 session timeout"],answer:"Parameter not registered as a custom definition",explanation:"Custom parameters must be registered as custom dimensions/metrics in GA4."},
                {id:124,question:"When testing Consent Mode, which GA4 tool helps check whether consent signals are being respected?",options:["Consent Overview report","Realtime report","Audience Builder","Predictive Metrics"],answer:"Consent Overview report",explanation:"The Consent Overview report shows how tags behave based on user consent."},
                {id:125,question:"An analyst wants to track enhanced measurement scrolls only up to 75%. What should be configured?",options:["GA4 Admin → Event Modification","GTM custom trigger with Scroll Depth = 75%","GA4 DebugView filter","GA4 Audience filter"],answer:"GTM custom trigger with Scroll Depth = 75%",explanation:"GA4 enhanced scroll is fixed (90%). Custom scroll thresholds require GTM custom triggers."},
                {id:126,question:"Which GA4 feature allows you to analyze multi-step user journeys like checkout funnels?",options:["Path Exploration","Funnel Exploration","Cohort Exploration","Segments"],answer:"Funnel Exploration",explanation:"Funnel Exploration visualizes multi-step user journeys."},
                {id:127,question:"A GTM server-side container is deployed on collect.example.com. Why is this beneficial?",options:["Improves ad personalization","Makes tracking requests look like first-party","Automatically removes cookies","Increases GTM limits"],answer:"Makes tracking requests look like first-party",explanation:"Hosting the endpoint on a subdomain ensures requests are first-party, avoiding ITP cookie blocking."},
                {id:128,question:"Which GA4 report is best for investigating attribution modeling differences?",options:["User Explorer","Model Comparison Tool","Funnel Exploration","Path Exploration"],answer:"Model Comparison Tool",explanation:"The Model Comparison Tool allows testing different attribution models (last click, DDA, etc.)."},
                {id:129,question:"If GA4 ecommerce items array is missing, what will happen?",options:["Purchase events fail completely","Purchases are tracked without product details","GA4 reports break","GA4 stops sending data"],answer:"Purchases are tracked without product details",explanation:"GA4 logs the event, but ecommerce product detail reports will be empty."},
                {id:130,question:"In Consent Mode, when storage is denied, how does GA4 handle user data?",options:["No data collected","Data is modeled based on non-consented users","Limited pings sent without cookies","Only custom events are tracked"],answer:"Limited pings sent without cookies",explanation:"GA4 still sends cookieless pings to preserve modeling."},
                {id:131,question:"Which GTM feature would you use to capture a query string value from the URL (e.g., utm_source)?",options:["Auto-Event Variable","Lookup Table","URL Variable","Custom JavaScript"],answer:"URL Variable",explanation:"The URL Variable extracts query parameters like utm_source."},
                {id:132,question:"If a GA4 server-side container doesn’t log incoming requests, which tool helps check requests?",options:["Chrome DevTools → Network tab","GA4 DebugView","Consent Mode report","Admin Audit Log"],answer:"Chrome DevTools → Network tab",explanation:"Network tab helps verify whether events hit the server endpoint at all."},
                {id:133,question:"What’s the key difference between blocking triggers and exception triggers in GTM?",options:["Blocking triggers stop tags permanently, exceptions apply conditionally","Exceptions are tag-level, blocking are trigger-level","They are identical","Blocking only works for GA4 tags"],answer:"Exceptions are tag-level, blocking are trigger-level",explanation:"Exception triggers stop a tag, while blocking applies at trigger level."},
                {id:134,question:"Which GA4 feature can predict future purchase probability?",options:["Predictive Metrics","Funnel Exploration","BigQuery export","Modeled Conversions"],answer:"Predictive Metrics",explanation:"GA4’s predictive metrics estimate purchase and churn probability."},
                {id:135,question:"If GA4 events are received but revenue is always “0”, what’s missing?",options:["coupon parameter","value or items array","transaction_id","ad_storage consent"],answer:"value or items array",explanation:"Without value and items, GA4 cannot log revenue."},
                {id:136,question:"When debugging consent, which GTM variable shows current consent state?",options:["{{Consent State}}","{{Consent Default}}","{{Consent Mode}}","{{Consent Debugger}}"],answer:"{{Consent State}}",explanation:"GTM has a built-in Consent State variable."},
                {id:137,question:"What’s the default data retention period in GA4 for event-level data?",options:["2 months","14 months","26 months","50 months"],answer:"2 months",explanation:"GA4 defaults to 2 months, but can be extended to 14."},
                {id:138,question:"A server-side container is not enriching requests with IP/User-Agent. What’s missing?",options:["Client configuration","Header forwarding setup","Debug mode","Trigger group"],answer:"Header forwarding setup",explanation:"You must forward headers (IP, UA) for GA4 enrichment."},
                {id:139,question:"Which GA4 metric best evaluates engagement quality?",options:["Bounce rate","Engaged sessions","Session duration","Views per user"],answer:"Engaged sessions",explanation:"GA4 defines engaged sessions (10s+, conversion, or 2+ views)."},
                {id:140,question:"If GA4 purchase revenue is higher than actual, what’s likely wrong?",options:["Wrong coupon parameter","Duplicate transaction_ids not used","ad_storage misconfigured","Wrong audience setup"],answer:"Duplicate transaction_ids not used",explanation:"Without transaction_id, duplicate purchases can inflate revenue."},
                {id:141,question:"Which advanced technique allows splitting GTM container into multiple environments (dev, staging, prod)?",options:["Workspaces","Environments","Versions","Custom JS"],answer:"Environments",explanation:"GTM Environments let you test separate container setups."},
                {id:142,question:"GA4 sampling happens when using:",options:["Standard reports","BigQuery export","Explorations with large data","Realtime report"],answer:"Explorations with large data",explanation:"GA4 sampling applies only in Explorations, not standard reports."},
                {id:143,question:"Which GA4 event parameter is critical for ecommerce deduplication?",options:["session_id","transaction_id","user_id","coupon"],answer:"transaction_id",explanation:"transaction_id prevents duplicate purchase counting."},
                {id:144,question:"Which server-side tagging feature helps prevent ad blockers from blocking hits?",options:["Transport URL with custom domain","GA4 Debugger","Consent Initialization","Lookup Variables"],answer:"Transport URL with custom domain",explanation:"Using a custom domain bypasses common ad blocker filters."},
                {id:145,question:"If a GTM variable returns undefined values in Preview, what’s the best fix?",options:["Add Consent Initialization","Check trigger timing","Delete GA4 tag","Extend GA4 session"],answer:"Check trigger timing",explanation:"Variables may load too early, before DOM/data is ready."},
                {id:146,question:"Which GA4 event is automatically collected if enhanced measurement is on?",options:["video_start","video_progress","file_download","ad_click"],answer:"file_download",explanation:"File downloads are auto-tracked in enhanced measurement."},
                {id:147,question:"What’s the primary benefit of BigQuery export from GA4?",options:["More custom reports","Unsampled, raw event-level data","Free storage","Automated ads"],answer:"Unsampled, raw event-level data",explanation:"BigQuery export gives unsampled event-level data."},
                {id:148,question:"In cookie consent frameworks, which option describes prior consent?",options:["Tracking starts, then user opts out","Tracking waits until user opts in","Tracking always on","Consent ignored for analytics"],answer:"Tracking waits until user opts in",explanation:"Prior consent = no tracking until user actively agrees."},
                {id:149,question:"Which GTM tag type is used for sending data to GA4 via Measurement Protocol in server container?",options:["GA4 Event","GA4 Configuration","GA4 Server Event","HTTP Request"],answer:"GA4 Server Event",explanation:"GA4 Server Event tag sends data from server container to GA4."},
                {id:150,question:"A marketer notices GA4 reports low conversion numbers vs backend sales. What’s the first step?",options:["Check GA4 attribution model","Verify event schema matches GA4 ecommerce spec","Enable Predictive Metrics","Reduce data retention"],answer:"Verify event schema matches GA4 ecommerce spec",explanation:"If sales don’t match, ecommerce schema mismatch is the first thing to check."}
            ]
        };

        let currentLevel = '';
        let quizData = [];
        let userAnswers = {};
        let scoreChart = null;
        const userAnswersKeyPrefix = 'exam_user_answers';
        const alphabet = ['A', 'B', 'C', 'D'];
        
        function startQuiz(level) {
            currentLevel = level;
            localStorage.setItem('current_exam_level', level);
            quizData = allQuizData[level];
            userAnswers = {};

            document.getElementById('level-selection-container').classList.add('hidden');
            document.getElementById('scorecard-container').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');

            const levelTitle = level.charAt(0).toUpperCase() + level.slice(1);
            document.getElementById('quiz-title').innerText = `GA4, GTM, Looker & Consent Exam - ${levelTitle}`;
            document.getElementById('total-questions-header').innerText = quizData.length;
            
            renderQuestions();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function restartQuiz() {
            if (!currentLevel) return;
            if (confirm('Are you sure you want to restart this exam? Your progress for this level will be lost.')) {
                // 1. Clear the in-memory answers object
                userAnswers = {};
                // 2. Clear storage for the current level
                localStorage.removeItem(`${userAnswersKeyPrefix}_${currentLevel}`);
                // 3. Update the answered count in the UI
                document.getElementById('answered-count').innerText = 0;
                
                // 4. Re-render the questions to reset the UI completely
                renderQuestions();
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function renderQuestions() {
            const questionsContainer = document.getElementById('questions-list');
            questionsContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'p-6 border border-[#818181] rounded-lg bg-white shadow-sm transition-transform duration-300 hover:scale-[1.01]';
                questionElement.id = `question-card-${q.id}`;
                questionElement.innerHTML = `
                    <p class="font-bold text-lg mb-4 text-[#132b3d]">${index + 1}. ${q.question}</p>
                    <div class="space-y-3">
                        ${q.options.map((option, optIndex) => `
                            <label class="block question-option p-3 rounded-md bg-gray-50 hover:bg-gray-200">
                                <input type="radio" name="question-${q.id}" value="${option}" class="hidden">
                                <span class="ml-2 font-medium">${alphabet[optIndex]}. ${option}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                questionsContainer.appendChild(questionElement);
            });
            loadProgress();

            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    const questionId = e.target.name.split('-')[1];
                    userAnswers[questionId] = e.target.value;
                    const questionCard = document.getElementById(`question-card-${questionId}`);
                    questionCard.classList.add('question-answered');

                    const labels = questionCard.querySelectorAll('label');
                    labels.forEach(label => {
                        label.classList.remove('option-selected');
                    });
                    e.target.closest('label').classList.add('option-selected');
                    
                    saveProgress();
                });
            });
        }

        function loadProgress() {
            const savedAnswers = localStorage.getItem(`${userAnswersKeyPrefix}_${currentLevel}`);
            if (savedAnswers) {
                userAnswers = JSON.parse(savedAnswers);
                let answeredCount = 0;
                for (const qId in userAnswers) {
                    const questionCard = document.getElementById(`question-card-${qId}`);
                    if (questionCard) {
                        questionCard.classList.add('question-answered');
                        const input = document.querySelector(`input[name="question-${qId}"][value="${userAnswers[qId]}"]`);
                        if (input) {
                            input.checked = true;
                            const label = input.closest('label');
                            label.classList.add('option-selected');
                        }
                        answeredCount++;
                    }
                }
                document.getElementById('answered-count').innerText = answeredCount;
            } else {
                 userAnswers = {};
                 document.getElementById('answered-count').innerText = 0;
            }
            checkAllAnswered();
        }

        function saveProgress() {
            localStorage.setItem(`${userAnswersKeyPrefix}_${currentLevel}`, JSON.stringify(userAnswers));
            document.getElementById('answered-count').innerText = Object.keys(userAnswers).length;
            checkAllAnswered();
        }

        function checkAllAnswered() {
            const allAnswered = Object.keys(userAnswers).length === quizData.length;
            document.getElementById('submit-btn').disabled = !allAnswered;
        }

        function submitQuiz() {
            let score = 0;
            quizData.forEach(q => {
                if (userAnswers[q.id] === q.answer) {
                    score++;
                }
            });

            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('scorecard-container').classList.remove('hidden');
            document.getElementById('score').innerText = score;
            document.getElementById('total-questions-score').innerText = quizData.length;

            renderScorecard();
            renderScoreChart(score);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderScorecard() {
            const detailsContainer = document.getElementById('scorecard-details');
            detailsContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.answer;

                const questionResult = document.createElement('div');
                questionResult.className = `p-6 rounded-lg shadow-md transition-transform duration-300 transform hover:scale-[1.01] bg-white`;

                let optionsHTML = q.options.map((option, optIndex) => {
                    let classes = 'block mt-2 p-3 rounded-md';
                    if (option === q.answer) {
                        classes += ' bg-green-100 text-green-800 border border-green-400 font-bold';
                    } else if (option === userAnswer && !isCorrect) {
                        classes += ' bg-red-100 text-red-800 border border-red-400 font-bold';
                    } else {
                         classes += ' bg-gray-100 text-gray-800 border border-transparent';
                    }
                    return `<div class="${classes}">${alphabet[optIndex]}. ${option}</div>`;
                }).join('');

                questionResult.innerHTML = `
                    <p class="font-bold text-lg mb-4 text-[#132b3d]">${index + 1}. ${q.question}</p>
                    <div class="space-y-2">
                        ${optionsHTML}
                    </div>
                    <div class="mt-6 p-4 bg-gray-100 rounded-md">
                        <p class="font-bold text-[#132b3d] mb-1">Explanation:</p>
                        <p class="text-gray-700">${q.explanation}</p>
                    </div>
                `;
                detailsContainer.appendChild(questionResult);
            });
        }

        function renderScoreChart(score) {
            const ctx = document.getElementById('score-chart').getContext('2d');
            if (scoreChart) {
                scoreChart.destroy();
            }
            scoreChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Correct', 'Incorrect'],
                    datasets: [{
                        data: [score, quizData.length - score],
                        backgroundColor: ['#108289', '#f37e21'],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function showLevelSelection() {
            localStorage.removeItem('current_exam_level');
            currentLevel = '';
            
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('scorecard-container').classList.add('hidden');
            document.getElementById('level-selection-container').classList.remove('hidden');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const activeLevel = localStorage.getItem('current_exam_level');
            if (activeLevel && allQuizData[activeLevel]) {
                startQuiz(activeLevel);
            }
            document.getElementById('submit-btn').addEventListener('click', submitQuiz);
        });
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
