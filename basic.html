
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Exam: Basic Level</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 font-sans text-gray-800">

    <div class="container mx-auto p-4 sm:p-8">
        <div id="quiz-container" class="bg-white p-6 sm:p-8 rounded-lg shadow-xl max-w-4xl mx-auto">
            <div class="sticky-header bg-white pb-4 rounded-lg flex flex-col sm:flex-row justify-between items-center mb-4">
                <h1 class="text-xl sm:text-2xl font-bold text-[#132b3d] mb-2 sm:mb-0">Exam - Level 1: Basic</h1>
                <div class="flex items-center space-x-4">
                    <p class="text-md font-medium text-[#132b3d]">Questions Answered: <span id="answered-count">0</span> / 50</p>
                    <button onclick="restartQuiz()" class="bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">Restart Exam</button>
                    <a href="index.html" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors no-underline">Change Level</a>
                </div>
            </div>
            
            <div id="questions-list" class="space-y-8"></div>

            <div class="mt-10 text-center">
                <button id="submit-btn" class="submit-btn bg-[#f37e21] text-white font-bold py-4 px-12 rounded-full hover:bg-orange-600 transition-all transform hover:scale-105" disabled>
                    Submit Exam
                </button>
            </div>
        </div>

        <div id="scorecard-container" class="hidden bg-white p-6 sm:p-8 rounded-lg shadow-xl mt-8 max-w-4xl mx-auto">
            <h2 class="text-3xl sm:text-4xl font-bold text-center text-[#132b3d] mb-4">Your Results</h2>
            <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
                <div class="w-48 h-48">
                    <canvas id="score-chart"></canvas>
                </div>
                <div class="text-center md:text-left">
                    <p class="text-lg text-[#818181]">You answered</p>
                    <p class="text-6xl font-extrabold text-[#132b3d]"><span id="score"></span>/<span id="total-questions-score"></span></p>
                    <p class="text-lg text-[#818181]">questions correctly.</p>
                </div>
            </div>
            <div id="scorecard-details" class="space-y-6"></div>
            <div class="mt-8 text-center">
                <a href="index.html" class="bg-[#f37e21] text-white font-bold py-3 px-8 rounded-full hover:bg-orange-600 transition-all transform hover:scale-105 no-underline">
                    Back to Level Select
                </a>
            </div>
        </div>
    </div>

    <script>
        const quizData = [
            {id:1,question:"In GA4, what is the default measurement model?",options:["Session-based","Pageview-based","Event-based","User-based"],answer:"Event-based",explanation:"GA4 uses an event-based data model, unlike UA which was session/pageview-based. Every interaction (page view, click, scroll, purchase) is tracked as an event."},
            {id:2,question:"Which of the following is NOT a default event automatically collected in GA4?",options:["Page_view","Scroll","Outbound_click","Custom_conversion"],answer:"Custom_conversion",explanation:"GA4 automatically collects page_view, scroll, outbound_click, etc., but custom conversions must be set up manually by the user."},
            {id:3,question:"In GTM, what is a “Trigger”?",options:["A variable that stores values","A condition that fires a tag","A tag type for GA4","A report in GA4"],answer:"A condition that fires a tag",explanation:"Triggers in GTM decide when a tag should fire. For example, a GA4 event tag may fire only when the trigger condition (like button click) is met."},
            {id:4,question:"Which GTM component holds dynamic values like Page URL or Click Text?",options:["Tag","Trigger","Variable","Event"],answer:"Variable",explanation:"Variables in GTM store dynamic values (like Page URL, Click ID, or custom data layer values) that can be used in triggers or tags."},
            {id:5,question:"When setting up GA4 via GTM, which tag type is most commonly used for tracking events?",options:["Universal Analytics Event","GA4 Configuration","GA4 Event","GA4 Page Path"],answer:"GA4 Event",explanation:"The GA4 Event tag is used for tracking custom events. The GA4 Configuration tag initializes GA4, but the event tag is used for actual user interactions."},
            {id:6,question:"Which of the following is true about GA4 server-side tagging at a basic level?",options:["It removes the need for GTM","It allows sending data via your own server endpoint","It works without a tracking ID","It is default in every GA4 property"],answer:"It allows sending data via your own server endpoint",explanation:"Server-side tagging routes tracking requests through your own server endpoint, giving you more control over data privacy and accuracy."},
            {id:7,question:"Which of the following is a benefit of using basic cookie consent banners?",options:["Improves SEO ranking","Ensures compliance with privacy regulations like GDPR","Increases ad impressions","Speeds up page load"],answer:"Ensures compliance with privacy regulations like GDPR",explanation:"Cookie consent banners are required in many regions (EU/California) to obtain user permission before setting tracking cookies."},
            {id:8,question:"In GA4, which parameter automatically comes with the page_view event?",options:["page_url","page_referrer","page_location","page_category"],answer:"page_location",explanation:"The page_view event automatically includes page_location (full URL), page_referrer, and other metadata."},
            {id:9,question:"What is the purpose of the Preview mode in GTM?",options:["To edit GA4 reports","To test tags and triggers before publishing","To configure server-side tagging","To manage cookie banners"],answer:"To test tags and triggers before publishing",explanation:"GTM Preview/Debug mode lets you test which tags fire, what triggers are working, and what data is sent—before going live."},
            {id:10,question:"Which of the following GA4 features replaces Goals from Universal Analytics?",options:["Key Events","Audience","Reports Snapshot","Segments"],answer:"Key Events",explanation:"In GA4, Key Events (formerly Conversions) are used instead of Goals from UA. They mark important business actions like purchases or form submissions."},
            {id:11,question:"Which GA4 tag is required first in GTM before sending any event?",options:["GA4 Event Tag","GA4 Pageview Tag","GA4 Configuration Tag","GA4 Ecommerce Tag"],answer:"GA4 Configuration Tag",explanation:"The Configuration tag initializes GA4 with your Measurement ID. Without it, event tags cannot properly send data to GA4."},
            {id:12,question:"What does the GA4 Measurement ID look like?",options:["UA-XXXXXX-X","G-XXXXXXX","GTM-XXXXXX","GA4-XXXXXX"],answer:"G-XXXXXXX",explanation:"GA4 Measurement IDs start with “G-”, while UA IDs start with “UA-”."},
            {id:13,question:"Which of these is an automatically collected event in GA4?",options:["video_progress","session_start","newsletter_signup","form_submit"],answer:"session_start",explanation:"GA4 automatically tracks session_start, page_view, scroll, and more. Events like newsletter_signup or form_submit need custom setup."},
            {id:14,question:"In GTM, the “All Pages” trigger is usually used with:",options:["Custom HTML tags","GA4 Configuration tag","Consent banners","Variables"],answer:"GA4 Configuration tag",explanation:"The GA4 Configuration tag should fire on All Pages so that GA4 is initialized across the site."},
            {id:15,question:"What is the default session timeout in GA4?",options:["15 minutes","30 minutes","1 hour","24 hours"],answer:"30 minutes",explanation:"By default, GA4 sessions timeout after 30 minutes of inactivity, though this can be customized."},
            {id:16,question:"What is the role of the GTM “Data Layer”?",options:["Stores user consent preferences","Stores and passes structured data to GTM","Replaces GA4 tags","Debugs GA4 reports"],answer:"Stores and passes structured data to GTM",explanation:"The Data Layer is a JavaScript object that holds structured data (e.g., ecommerce details, user info) that GTM can use in tags."},
            {id:17,question:"Which of the following is an Enhanced Measurement event in GA4?",options:["Click_download","File_download","Purchase","Add_to_cart"],answer:"File_download",explanation:"Enhanced Measurement automatically tracks interactions like file_download, outbound_click, and scroll. Ecommerce events like purchase or add_to_cart require manual setup."},
            {id:18,question:"Which GTM tag type is used to set up GA4 tracking?",options:["Custom JavaScript","GA4 Event Tag","Custom HTML","Google Ads Remarketing"],answer:"GA4 Event Tag",explanation:"GA4 Event tags in GTM allow sending custom or recommended GA4 events."},
            {id:19,question:"Which GA4 metric measures the number of users who engaged with the site for at least 10 seconds or triggered a conversion event?",options:["Active Users","Engaged Sessions","Conversion Rate","Bounce Rate"],answer:"Engaged Sessions",explanation:"GA4 uses Engaged Sessions instead of Bounce Rate. A session counts as engaged if it lasts 10+ seconds, includes 2+ page views, or includes a conversion."},
            {id:20,question:"Which type of cookie is typically set by GA4 client-side tracking?",options:["_ga","PHPSESSID","_utmz","JSESSIONID"],answer:"_ga",explanation:"The _ga cookie is used by GA4 to identify unique users."},
            {id:21,question:"What does GTM’s “Preview” mode show in the debug panel?",options:["Only GA4 reports","Which tags fired, blocked, and the triggers","Cookie policies","GA4 user paths"],answer:"Which tags fired, blocked, and the triggers",explanation:"GTM Preview mode is used to debug: it shows which tags fired, why, and what data was passed."},
            {id:22,question:"In GA4, which scope applies to parameters?",options:["Session","Event","User","Page"],answer:"Event",explanation:"Parameters in GA4 are tied to events, unlike UA which had session and user scopes."},
            {id:23,question:"Which type of GTM variable retrieves values from the Data Layer?",options:["Auto-event Variable","Lookup Table Variable","Data Layer Variable","Custom JavaScript Variable"],answer:"Data Layer Variable",explanation:"Data Layer Variables pull values from the GTM Data Layer object."},
            {id:24,question:"In GA4, what is the limit of parameters per event (including default + custom)?",options:["10","25","50","Unlimited"],answer:"50",explanation:"Each event can have up to 50 parameters in GA4."},
            {id:25,question:"Which GA4 feature helps in tracking user journeys across devices?",options:["Session Unification","User-ID tracking","IP override","Cross-property filters"],answer:"User-ID tracking",explanation:"User-ID tracking allows GA4 to stitch user journeys across devices if the same login is used."},
            {id:26,question:"What is a common use of Consent Mode in GTM?",options:["Speed optimization","Adjusting data collection based on user consent","Debugging tags","Removing cookies"],answer:"Adjusting data collection based on user consent",explanation:"Consent Mode modifies tag behavior (e.g., ads, analytics) based on user consent decisions."},
            {id:27,question:"Which of these is an example of a GA4 recommended event?",options:["sign_up","login_attempt","new_session","outbound_link"],answer:"sign_up",explanation:"Google recommends using predefined event names like sign_up, purchase, login for consistency in reporting."},
            {id:28,question:"Where in GTM can you find built-in variables like Page URL, Click ID, and Referrer?",options:["Variables > Built-in Variables","Triggers > Conditions","Tags > Properties","Data Layer Settings"],answer:"Variables > Built-in Variables",explanation:"Built-in variables are pre-configured and can be enabled under GTM’s Variables section."},
            {id:29,question:"What is the maximum number of properties allowed per GA4 account?",options:["25","50","100","Unlimited"],answer:"100",explanation:"A GA4 account can have up to 100 properties."},
            {id:30,question:"Which GA4 event is triggered automatically when a user clicks a link to another website?",options:["click_out","external_link","outbound_click","exit_click"],answer:"outbound_click",explanation:"Enhanced Measurement automatically tracks outbound_click events."},
            {id:31,question:"What is the maximum length for a GA4 event parameter name?",options:["24 characters","40 characters","50 characters","100 characters"],answer:"40 characters",explanation:"GA4 parameter names can be up to 40 characters long."},
            {id:32,question:"In GTM, which trigger type is best to capture a button click?",options:["Page View","DOM Ready","Click – All Elements","Timer"],answer:"Click – All Elements",explanation:"The “Click – All Elements” trigger can capture clicks on specific buttons or links."},
            {id:33,question:"Which GA4 metric counts users who visited a site at least once in the last 30 days?",options:["Daily Active Users","Weekly Active Users","Monthly Active Users","Lifetime Users"],answer:"Monthly Active Users",explanation:"GA4 provides DAU, WAU, MAU metrics to measure engagement."},
            {id:34,question:"What is the correct order of GTM execution?",options:["Variables → Triggers → Tags","Triggers → Tags → Variables","Tags → Variables → Triggers","Variables → Tags → Triggers"],answer:"Variables → Triggers → Tags",explanation:"GTM first resolves variables, then evaluates triggers, then fires tags."},
            {id:35,question:"Which GA4 tool allows you to debug live event collection?",options:["Realtime Report","DebugView","Exploration","Audience Builder"],answer:"DebugView",explanation:"DebugView shows events in real-time from devices with debug mode enabled."},
            {id:36,question:"Which of the following is NOT a GTM trigger type?",options:["Page View","Scroll Depth","Form Submission","Session Timeout"],answer:"Session Timeout",explanation:"GTM does not have a “Session Timeout” trigger."},
            {id:37,question:"What is the GA4 BigQuery free daily export limit?",options:["1 GB","10 GB","50 GB","1 TB"],answer:"10 GB",explanation:"Free GA4 BigQuery export allows 10 GB of queries per day."},
            {id:38,question:"What happens if you do not publish a GTM container after making changes?",options:["Tags auto-publish after 24 hrs","Tags remain inactive","GA4 breaks","Consent mode resets"],answer:"Tags remain inactive",explanation:"GTM changes only go live after publishing a container version."},
            {id:39,question:"Which GA4 event is triggered when a user starts a new session?",options:["session_begin","session_new","session_start","session_initiate"],answer:"session_start",explanation:"GA4 automatically logs session_start at the beginning of a new session."},
            {id:40,question:"What is the GA4 free data retention period by default?",options:["2 months","14 months","26 months","Unlimited"],answer:"2 months",explanation:"GA4 keeps event-level data for 2 months by default, extendable to 14 months."},
            {id:41,question:"What is one benefit of using Server-Side GTM over Client-Side GTM?",options:["Tags fire faster","Data is more accurate & privacy-compliant","It eliminates GA4 configuration","It blocks all cookies"],answer:"Data is more accurate & privacy-compliant",explanation:"Server-side GTM lets you process data securely before sending it to GA4/ads platforms."},
            {id:42,question:"Which GA4 feature allows exporting raw data to BigQuery?",options:["Free for all GA4 properties","Paid only","Only for GA4 360","Only with server-side tagging"],answer:"Free for all GA4 properties",explanation:"Unlike UA, GA4 offers free BigQuery export for all users."},
            {id:43,question:"What type of consent is needed for Analytics cookies in GDPR regions?",options:["No consent required","Explicit user consent","Implicit browser consent","Tag Manager auto-consent"],answer:"Explicit user consent",explanation:"GDPR requires explicit consent for analytics tracking cookies."},
            {id:44,question:"Which of these is a built-in consent state variable in GTM?",options:["consent_analytics","ad_storage","page_consent","user_consent"],answer:"ad_storage",explanation:"Built-in consent variables like ad_storage and analytics_storage control tag behavior."},
            {id:45,question:"What is the main identifier used by GA4 for users (without User-ID)?",options:["User-Agent","Client ID","Session ID","Device ID"],answer:"Client ID",explanation:"GA4 uses Client ID stored in cookies to recognize users."},
            {id:46,question:"What does the GTM “Version History” feature allow?",options:["Editing GA4 reports","Restoring a previous container setup","Exporting GA4 events","Debugging cookies"],answer:"Restoring a previous container setup",explanation:"Version History lets you roll back GTM to a stable version."},
            {id:47,question:"Which GA4 parameter stores the referral source?",options:["session_referrer","traffic_source","page_referrer","utm_source"],answer:"page_referrer",explanation:"GA4 captures page_referrer automatically with events."},
            {id:48,question:"Which GTM feature ensures tags do not fire until user consent is given?",options:["Consent Initialization Trigger","DOM Ready Trigger","Tag Sequencing","Data Layer Push"],answer:"Consent Initialization Trigger",explanation:"Consent Initialization triggers run before all other triggers, enforcing consent requirements."},
            {id:49,question:"Which GA4 property type is used for both websites and apps?",options:["App + Web Property","Hybrid Property","GA4 Property","Firebase Property"],answer:"GA4 Property",explanation:"GA4 properties track both websites and apps under one property."},
            {id:50,question:"What is the benefit of using GA4 DebugView with GTM Preview?",options:["Shows live reports","Confirms events are firing correctly and reaching GA4","Increases site speed","Blocks consent banners"],answer:"Confirms events are firing correctly and reaching GA4",explanation:"DebugView + GTM Preview lets you validate that events fire and reach GA4 in real time."}
        ];
        
        const currentLevel = 'basic';
        let userAnswers = {};
        let scoreChart = null;
        const userAnswersKey = `exam_user_answers_${currentLevel}`;
        const alphabet = ['A', 'B', 'C', 'D'];

        function restartQuiz() {
            if (confirm('Are you sure you want to restart this exam? Your progress will be lost.')) {
                userAnswers = {};
                localStorage.removeItem(userAnswersKey);
                document.getElementById('answered-count').innerText = 0;
                renderQuestions();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function renderQuestions() {
            const questionsContainer = document.getElementById('questions-list');
            questionsContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'p-6 border border-[#818181] rounded-lg bg-white shadow-sm transition-transform duration-300 hover:scale-[1.01]';
                questionElement.id = `question-card-${q.id}`;
                questionElement.innerHTML = `
                    <p class="font-bold text-lg mb-4 text-[#132b3d]">${index + 1}. ${q.question}</p>
                    <div class="space-y-3">
                        ${q.options.map((option, optIndex) => `
                            <label class="block question-option p-3 rounded-md bg-gray-50 hover:bg-gray-200">
                                <input type="radio" name="question-${q.id}" value="${option}" class="hidden">
                                <span class="ml-2 font-medium">${alphabet[optIndex]}. ${option}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                questionsContainer.appendChild(questionElement);
            });
            loadProgress();

            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    const questionId = e.target.name.split('-')[1];
                    userAnswers[questionId] = e.target.value;
                    const questionCard = document.getElementById(`question-card-${questionId}`);
                    questionCard.classList.add('question-answered');

                    const labels = questionCard.querySelectorAll('label');
                    labels.forEach(label => {
                        label.classList.remove('option-selected');
                    });
                    e.target.closest('label').classList.add('option-selected');
                    
                    saveProgress();
                });
            });
        }

        function loadProgress() {
            const savedAnswers = localStorage.getItem(userAnswersKey);
            if (savedAnswers) {
                userAnswers = JSON.parse(savedAnswers);
                let answeredCount = 0;
                for (const qId in userAnswers) {
                    const questionCard = document.getElementById(`question-card-${qId}`);
                    if (questionCard) {
                        questionCard.classList.add('question-answered');
                        const input = document.querySelector(`input[name="question-${qId}"][value="${userAnswers[qId]}"]`);
                        if (input) {
                            input.checked = true;
                            input.closest('label').classList.add('option-selected');
                        }
                        answeredCount++;
                    }
                }
                document.getElementById('answered-count').innerText = answeredCount;
            } else {
                 userAnswers = {};
                 document.getElementById('answered-count').innerText = 0;
            }
            checkAllAnswered();
        }

        function saveProgress() {
            localStorage.setItem(userAnswersKey, JSON.stringify(userAnswers));
            document.getElementById('answered-count').innerText = Object.keys(userAnswers).length;
            checkAllAnswered();
        }

        function checkAllAnswered() {
            const allAnswered = Object.keys(userAnswers).length === quizData.length;
            document.getElementById('submit-btn').disabled = !allAnswered;
        }

        function submitQuiz() {
            let score = 0;
            quizData.forEach(q => {
                if (userAnswers[q.id] === q.answer) {
                    score++;
                }
            });

            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('scorecard-container').classList.remove('hidden');
            document.getElementById('score').innerText = score;
            document.getElementById('total-questions-score').innerText = quizData.length;

            renderScorecard();
            renderScoreChart(score);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderScorecard() {
            const detailsContainer = document.getElementById('scorecard-details');
            detailsContainer.innerHTML = '';
            quizData.forEach((q, index) => {
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.answer;

                const questionResult = document.createElement('div');
                questionResult.className = `p-6 rounded-lg shadow-md transition-transform duration-300 transform hover:scale-[1.01] bg-white`;

                let optionsHTML = q.options.map((option, optIndex) => {
                    let classes = 'block mt-2 p-3 rounded-md';
                    if (option === q.answer) {
                        classes += ' bg-green-100 text-green-800 border border-green-400 font-bold';
                    } else if (option === userAnswer && !isCorrect) {
                        classes += ' bg-red-100 text-red-800 border border-red-400 font-bold';
                    } else {
                         classes += ' bg-gray-100 text-gray-800 border border-transparent';
                    }
                    return `<div class="${classes}">${alphabet[optIndex]}. ${option}</div>`;
                }).join('');

                questionResult.innerHTML = `
                    <p class="font-bold text-lg mb-4 text-[#132b3d]">${index + 1}. ${q.question}</p>
                    <div class="space-y-2">
                        ${optionsHTML}
                    </div>
                    <div class="mt-6 p-4 bg-gray-100 rounded-md">
                        <p class="font-bold text-[#132b3d] mb-1">Explanation:</p>
                        <p class="text-gray-700">${q.explanation}</p>
                    </div>
                `;
                detailsContainer.appendChild(questionResult);
            });
        }

        function renderScoreChart(score) {
            const ctx = document.getElementById('score-chart').getContext('2d');
            if (scoreChart) {
                scoreChart.destroy();
            }
            scoreChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Correct', 'Incorrect'],
                    datasets: [{
                        data: [score, quizData.length - score],
                        backgroundColor: ['#108289', '#f37e21'],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();
            document.getElementById('submit-btn').addEventListener('click', submitQuiz);
        });
    </script>
</body>
</html>
